{% extends 'base.html.twig' %}

{% block title %}Nouveau Contentieux
{% endblock %}


{% block stylesheets %}
	<style>
		#overlay {
			position: fixed;
			top: 0;
			z-index: 100;
			width: 100%;
			height: 100%;
			display: none;
			background: rgba(0, 0, 0, 0.6);
		}
		.cv-spinner {
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		.spinner {
			width: 40px;
			height: 40px;
			border: 4px #ddd solid;
			border-top: 4px #2e93e6 solid;
			border-radius: 50%;
			animation: sp-anime 0.8s infinite linear;
		}
		@keyframes sp-anime {
			100% {
				transform: rotate(360deg);
			}
		}
		.is-hide {
			display: none;
		}
	</style>

{% endblock %}

{% block body %}
	<!-- Page Heading -->
	<div class="d-sm-flex align-items-center justify-content-between mb-4">
		<h1 class="h3 mb-0 text-gray-800">Nouveau Contentieux</h1>
	</div>
	<!-- DataTales Example -->
	<div class="card shadow mb-4">
		<div class="card-body">
			<div class="container">
				<div class="row">
					<div class="col">
						{{ include('contentieux/_form.html.twig') }}
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="overlay">
		<div class="cv-spinner">
			<span class="spinner"></span>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script>
		// Déclaration des variables
let formJuridiction = document.querySelector('form#formJuridiction');
let envoyerJuridiction = document.getElementById('envoyer_juridiction');

// les évènements
envoyerJuridiction.addEventListener('click', function (event) {
// event.preventDefault();
// Récupère les données du formulaire
// let saisie = new FormData(formJuridiction);
// Lance la recherche
fetch("{{ url('app_juridiction_modal') }}", {
method: 'POST',
// body: saisie
}).then((response) => { // console.log(response);
return response.json();
setTimeout(function () {
$("#overlay").fadeOut(300);
}, 500);
}).then((data) => { // Affiche les résultats
let countJuri = document.getElementById('contentieux_juridiction').length;
countJuri.innerHTML = data.title;
}).catch((error) => {
console.log('Erreur : ' + error.message);
});
});
	</script>
	<script>
		$(document).ready(function () {
$('[data-bs-toggle="tooltip"]').tooltip();
});
	</script>
{% endblock %}
